<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ava - Assistant Vocal</title>
</head>
<body>
  <h1>Bonjour Dylan ðŸ‘‹</h1>
  <p>Ava Ã©coute en permanence. Dites <strong>"Ava"</strong> suivi de votre commande.</p>
  <p>Essayez : "Ava, quelle heure est-il ?" ou "Ava, raconte-moi une blague."</p>

  <script>
    const synth = window.speechSynthesis;
    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = 'fr-FR';
    recognition.continuous = true;
    recognition.interimResults = false;

    let listening = false;

    function speak(text) {
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = 'fr-FR';
      utterance.pitch = 1;
      utterance.rate = 1;
      utterance.voice = speechSynthesis.getVoices().find(voice => voice.lang === 'fr-FR' && voice.name.includes("Google")) || speechSynthesis.getVoices()[0];
      synth.speak(utterance);
    }

    function handleCommand(command) {
      console.log("Commande dÃ©tectÃ©e :", command);
      if (command.includes("heure")) {
        const heure = new Date().toLocaleTimeString('fr-FR');
        speak("Il est " + heure);
      } else if (command.includes("bonjour")) {
        speak("Bonjour Dylan, comment puis-je t'aider aujourd'hui ?");
      } else if (command.includes("blague")) {
        speak("Pourquoi les canards ont-ils autant de plumes ? Pour couvrir leur derriÃ¨re !");
      } else if (command.includes("merci")) {
        speak("Avec plaisir !");
      } else if (command.includes("mÃ©tÃ©o")) {
        speak("Il fait actuellement 25 degrÃ©s avec un beau soleil, idÃ©al pour une balade.");
      } else {
        speak("Je n'ai pas compris la commande.");
      }
    }

    recognition.onresult = (event) => {
      const last = event.results.length - 1;
      const transcript = event.results[last][0].transcript.trim().toLowerCase();
      console.log("Vous avez dit :", transcript);

      if (transcript.includes("ava")) {
        const cleaned = transcript.replace("ava", "").trim();
        if (cleaned.length > 0) {
          handleCommand(cleaned);
        } else {
          speak("Oui Dylan, je t'Ã©coute !");
        }
      }
    };

    recognition.onend = () => {
      if (listening) recognition.start(); // redÃ©marrer automatiquement
    };

    recognition.onerror = (event) => {
      console.error("Erreur de reconnaissance vocale :", event.error);
    };

    // Lancement automatique
    window.onload = () => {
      listening = true;
      recognition.start();
      speak("Assistant Ava prÃªt.");
    };
  </script>
</body>
</html>

